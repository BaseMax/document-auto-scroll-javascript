<style>
    body {
        display: flex;
        font-family: Arial, sans-serif;
    }
    #content {
        flex: 1;
        padding: 20px;
        max-width: 600px;
        margin-right: 20px;
    }
    #sidebar {
        width: 200px;
        position: fixed;
        top: 20px;
        right: 20px;
    }
    #sidebar ul {
        list-style-type: none;
        padding: 0;
    }
    #sidebar li {
        padding: 5px;
        cursor: pointer;
    }
    #sidebar li.active {
        font-weight: bold;
        color: blue;
    }
</style>

<div id="content">
    <h1>Heading 1</h1>
    <p>Lorem ipsum odor amet, consectetuer adipiscing elit. Mi metus amet integer etiam sociosqu dolor. Sodales hendrerit auctor sociosqu; ad consectetur ligula varius tempus. At donec nullam sit id nostra nisi nisl. Convallis libero quisque sociosqu urna mus conubia sapien! Platea odio lorem pharetra mus ante pellentesque. Laoreet placerat sociosqu arcu magnis ridiculus mollis ultrices. Volutpat congue conubia ex mollis in cras enim eros faucibus.

Condimentum porta a senectus, aptent efficitur mauris. Sit platea class at maximus dignissim curabitur. Class sollicitudin vel auctor; cubilia consequat scelerisque nostra class. Eu ante gravida phasellus; efficitur felis feugiat dictumst. Odio integer urna vestibulum duis rutrum lorem integer lectus. Tempus sagittis lobortis dignissim eget posuere nunc. Hac accumsan rutrum augue iaculis purus maecenas.

Lacus senectus morbi eget cras quisque felis mi. Fringilla eleifend adipiscing nulla duis semper ullamcorper aptent. Aenean eu nostra integer fermentum auctor commodo hac eu. Suscipit neque donec natoque dignissim nec imperdiet justo. Erat aliquet sit lobortis ut non lacinia mauris posuere. Dolor eleifend hendrerit neque, netus nullam ornare. Sagittis id venenatis eros nec eu egestas aliquam. Curabitur aliquam per duis; inceptos bibendum arcu diam. Magna facilisi dis purus ut massa ridiculus curae et consectetur.

Arcu felis praesent dictum tempus habitant non viverra. Ridiculus egestas tempus sagittis auctor tristique. Sem velit congue cras mauris ridiculus nostra pretium. Senectus class sociosqu inceptos non auctor fames. Cursus malesuada vehicula dapibus metus cursus diam volutpat ante habitasse. Laoreet ultrices sodales hendrerit donec; lacinia egestas justo. Porttitor metus pellentesque faucibus; hendrerit pharetra laoreet.

Inceptos tincidunt augue lectus fusce lacinia nunc. Nisl magnis risus sapien montes laoreet tortor elementum ridiculus. Molestie suscipit taciti convallis enim egestas erat ultricies imperdiet. Fermentum rutrum nisi sem porta adipiscing nulla mollis. Class a purus dapibus torquent ullamcorper eget. Vel himenaeos enim justo nisl convallis eleifend egestas pharetra. Elementum massa penatibus tempus; primis diam aliquam. Tincidunt non malesuada mus ullamcorper orci dui sollicitudin.
</p>
    <h2>Subheading 1.1</h2>
    <p>Lorem ipsum odor amet, consectetuer adipiscing elit. Mi metus amet integer etiam sociosqu dolor. Sodales hendrerit auctor sociosqu; ad consectetur ligula varius tempus. At donec nullam sit id nostra nisi nisl. Convallis libero quisque sociosqu urna mus conubia sapien! Platea odio lorem pharetra mus ante pellentesque. Laoreet placerat sociosqu arcu magnis ridiculus mollis ultrices. Volutpat congue conubia ex mollis in cras enim eros faucibus.

Condimentum porta a senectus, aptent efficitur mauris. Sit platea class at maximus dignissim curabitur. Class sollicitudin vel auctor; cubilia consequat scelerisque nostra class. Eu ante gravida phasellus; efficitur felis feugiat dictumst. Odio integer urna vestibulum duis rutrum lorem integer lectus. Tempus sagittis lobortis dignissim eget posuere nunc. Hac accumsan rutrum augue iaculis purus maecenas.

Lacus senectus morbi eget cras quisque felis mi. Fringilla eleifend adipiscing nulla duis semper ullamcorper aptent. Aenean eu nostra integer fermentum auctor commodo hac eu. Suscipit neque donec natoque dignissim nec imperdiet justo. Erat aliquet sit lobortis ut non lacinia mauris posuere. Dolor eleifend hendrerit neque, netus nullam ornare. Sagittis id venenatis eros nec eu egestas aliquam. Curabitur aliquam per duis; inceptos bibendum arcu diam. Magna facilisi dis purus ut massa ridiculus curae et consectetur.

Arcu felis praesent dictum tempus habitant non viverra. Ridiculus egestas tempus sagittis auctor tristique. Sem velit congue cras mauris ridiculus nostra pretium. Senectus class sociosqu inceptos non auctor fames. Cursus malesuada vehicula dapibus metus cursus diam volutpat ante habitasse. Laoreet ultrices sodales hendrerit donec; lacinia egestas justo. Porttitor metus pellentesque faucibus; hendrerit pharetra laoreet.

Inceptos tincidunt augue lectus fusce lacinia nunc. Nisl magnis risus sapien montes laoreet tortor elementum ridiculus. Molestie suscipit taciti convallis enim egestas erat ultricies imperdiet. Fermentum rutrum nisi sem porta adipiscing nulla mollis. Class a purus dapibus torquent ullamcorper eget. Vel himenaeos enim justo nisl convallis eleifend egestas pharetra. Elementum massa penatibus tempus; primis diam aliquam. Tincidunt non malesuada mus ullamcorper orci dui sollicitudin.
</p>
    <h3>Sub-subheading 1.1.1</h3>
    <p>Some content under sub-subheading 1.1.1.</p>
    <h2>Subheading 1.2</h2>
    <p>Some content under subheading 1.2.</p>
    <h1>Heading 2</h1>
    <p>Lorem ipsum odor amet, consectetuer adipiscing elit. Mi metus amet integer etiam sociosqu dolor. Sodales hendrerit auctor sociosqu; ad consectetur ligula varius tempus. At donec nullam sit id nostra nisi nisl. Convallis libero quisque sociosqu urna mus conubia sapien! Platea odio lorem pharetra mus ante pellentesque. Laoreet placerat sociosqu arcu magnis ridiculus mollis ultrices. Volutpat congue conubia ex mollis in cras enim eros faucibus.
</p>
    <h2>Subheading 2.1</h2>
    <p>Lorem ipsum odor amet, consectetuer adipiscing elit. Mi metus amet integer etiam sociosqu dolor. Sodales hendrerit auctor sociosqu; ad consectetur ligula varius tempus. At donec nullam sit id nostra nisi nisl. Convallis libero quisque sociosqu urna mus conubia sapien! Platea odio lorem pharetra mus ante pellentesque. Laoreet placerat sociosqu arcu magnis ridiculus mollis ultrices. Volutpat congue conubia ex mollis in cras enim eros faucibus.
Arcu felis praesent dictum tempus habitant non viverra. Ridiculus egestas tempus sagittis auctor tristique. Sem velit congue cras mauris ridiculus nostra pretium. Senectus class sociosqu inceptos non auctor fames. Cursus malesuada vehicula dapibus metus cursus diam volutpat ante habitasse. Laoreet ultrices sodales hendrerit donec; lacinia egestas justo. Porttitor metus pellentesque faucibus; hendrerit pharetra laoreet.

Inceptos tincidunt augue lectus fusce lacinia nunc. Nisl magnis risus sapien montes laoreet tortor elementum ridiculus. Molestie suscipit taciti convallis enim egestas erat ultricies imperdiet. Fermentum rutrum nisi sem porta adipiscing nulla mollis. Class a purus dapibus torquent ullamcorper eget. Vel himenaeos enim justo nisl convallis eleifend egestas pharetra. Elementum massa penatibus tempus; primis diam aliquam. Tincidunt non malesuada mus ullamcorper orci dui sollicitudin.
</p>
    <h3>Sub-subheading 2.1.1</h3>
    <p>Lorem ipsum odor amet, consectetuer adipiscing elit. Mi metus amet integer etiam sociosqu dolor. Sodales hendrerit auctor sociosqu; ad consectetur ligula varius tempus. At donec nullam sit id nostra nisi nisl. Convallis libero quisque sociosqu urna mus conubia sapien! Platea odio lorem pharetra mus ante pellentesque. Laoreet placerat sociosqu arcu magnis ridiculus mollis ultrices. Volutpat congue conubia ex mollis in cras enim eros faucibus.

Condimentum porta a senectus, aptent efficitur mauris. Sit platea class at maximus dignissim curabitur. Class sollicitudin vel auctor; cubilia consequat scelerisque nostra class. Eu ante gravida phasellus; efficitur felis feugiat dictumst. Odio integer urna vestibulum duis rutrum lorem integer lectus. Tempus sagittis lobortis dignissim eget posuere nunc. Hac accumsan rutrum augue iaculis purus maecenas.

Lacus senectus morbi eget cras quisque felis mi. Fringilla eleifend adipiscing nulla duis semper ullamcorper aptent. Aenean eu nostra integer fermentum auctor commodo hac eu. Suscipit neque donec natoque dignissim nec imperdiet justo. Erat aliquet sit lobortis ut non lacinia mauris posuere. Dolor eleifend hendrerit neque, netus nullam ornare. Sagittis id venenatis eros nec eu egestas aliquam. Curabitur aliquam per duis; inceptos bibendum arcu diam. Magna facilisi dis purus ut massa ridiculus curae et consectetur.

Arcu felis praesent dictum tempus habitant non viverra. Ridiculus egestas tempus sagittis auctor tristique. Sem velit congue cras mauris ridiculus nostra pretium. Senectus class sociosqu inceptos non auctor fames. Cursus malesuada vehicula dapibus metus cursus diam volutpat ante habitasse. Laoreet ultrices sodales hendrerit donec; lacinia egestas justo. Porttitor metus pellentesque faucibus; hendrerit pharetra laoreet.

Inceptos tincidunt augue lectus fusce lacinia nunc. Nisl magnis risus sapien montes laoreet tortor elementum ridiculus. Molestie suscipit taciti convallis enim egestas erat ultricies imperdiet. Fermentum rutrum nisi sem porta adipiscing nulla mollis. Class a purus dapibus torquent ullamcorper eget. Vel himenaeos enim justo nisl convallis eleifend egestas pharetra. Elementum massa penatibus tempus; primis diam aliquam. Tincidunt non malesuada mus ullamcorper orci dui sollicitudin.
</p>
</div>

<div id="sidebar">
    <h3>Table of Contents</h3>
    <ul id="toc"></ul>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        const toc = document.getElementById("toc");
        const headers = document.querySelectorAll("#content h1, #content h2, #content h3, #content h4, #content h5, #content h6");

        headers.forEach(header => {
            const li = document.createElement("li");
            li.textContent = header.textContent;
            li.dataset.target = header.id || header.textContent.replace(/\s+/g, '-').toLowerCase();
            header.id = li.dataset.target;

            li.addEventListener("click", function() {
                document.getElementById(header.id).scrollIntoView({ behavior: "smooth" });
            });

            const level = parseInt(header.tagName.charAt(1), 10);
            if (level === 1) {
                toc.appendChild(li);
            } else {
                let parentLi = toc.querySelector(`li[data-target="${header.parentElement.id}"]`);
                if (parentLi) {
                    let ul = parentLi.querySelector("ul");
                    if (!ul) {
                        ul = document.createElement("ul");
                        parentLi.appendChild(ul);
                    }
                    ul.appendChild(li);
                }
            }
        });

        const options = {
            root: null,
            threshold: 0.5,
        };

        const callback = (entries) => {
            entries.forEach(entry => {
                const id = entry.target.id;
                const li = toc.querySelector(`li[data-target="${id}"]`);
                if (entry.isIntersecting) {
                    if (li) {
                        li.classList.add("active");
                    }
                } else {
                    if (li) {
                        li.classList.remove("active");
                    }
                }
            });
        };

        const observer = new IntersectionObserver(callback, options);
        headers.forEach(header => observer.observe(header));
    });
</script>
